<driver>

<patterns>
  <namedRegex name="meta1">!&lt;\s*meta\s*name\s*=\s*&quot;\s*citation_pdf_url\s*&quot;\s*content\s*=&quot;(\S*?)&quot;\s*/?\s*&gt;!</namedRegex>
  <namedRegex name="meta2">!&lt;\s*meta\s*content\s*=\s*&quot;(\S*?)&quot;\s*name\s*=\s*&quot;\s*citation_pdf_url\s*&quot;\s*/?\s*&gt;!</namedRegex>
</patterns>

<site name="BMC">

  <signature>
    <body>!http://\S*/content/pdf/.*\.pdf!</body>
  </signature>

  <rule>
    <pattern>
      <match>!(http://\S*/content/pdf/.*?\.pdf)!</match>
    </pattern>
  </rule>

  <test>
    <url>http://dx.doi.org/10.1186/1471-2105-9-248</url>
    <url>http://www.biomedcentral.com/1471-2105/9/248</url>
    <url>http://genomebiology.com/2008/9/12/R168</url>
  </test>

</site>

<site name="ScienceDirect">
  <signature>
    <url>!sciencedirect!</url>
  </signature>

  <rule>
    <pattern>
      <match>!window\.open\(\'(http://www.sciencedirect.com/science.*?/sdarticle.pdf)!</match>
    </pattern>
  </rule>

  <test>
    <url>http://dx.doi.org/doi:10.1016/j.tig.2008.09.003</url>
  </test>

</site>


<site name="ElsevierHub">
  <signature>
    <url>!linkinghub.elsevier.com!</url>
  </signature>

  <!-- We are directly taken to science direct -->
  <rule>
    <pattern>
      <match>!window\.open\(\'(http://www.sciencedirect.com/science.*?/sdarticle.pdf)!</match>
    </pattern>
  </rule>

  <!-- We have landed on the selection page and go for the science direct path -->
  <rule>
    <pattern>
      <match>!(http://www\.sciencedirect\.com/science\?_ob=GatewayURL.*?)&quot;!</match>
    </pattern>
    <pattern>
      <match>!window\.open\(\'(http://www.sciencedirect.com/science.*?/sdarticle.pdf)!</match>
    </pattern>
  </rule>

  <test>
    <url>http://linkinghub.elsevier.com/retrieve/pii/S1470-2045(08)70008-1</url>
    <url>http://linkinghub.elsevier.com/retrieve/pii/S0168-9525(08)00255-2</url>
  </test>

</site>

<site name="PloS">

  <signature>
    <url>!plos!</url>
    <body>!/article/\S*representation=PDF!</body>
  </signature>

  <rule>
    <pattern>
      <rewrite>!^(.*plos.*\.org/article)/(.*)$!$1/fetchObjectAttachment.action?uri=$2&amp;representation=PDF!</rewrite>
    </pattern>
  </rule>

  <!-- old rule, don't think we need this any more, but it does not do any harm -->
  <rule>
    <pattern>
      <rewrite>!(.*\.plosjournals.org/perlserv/\?request).*doi=(10\..*)/(.*)!$1=get-pdf&amp;file=$2\_$3-L.pdf!</rewrite>
    </pattern>
  </rule>
  
  <rule>
    <pattern>
      <match>!(/article/\S*representation=PDF)!</match>
    </pattern>
  </rule>

  <test>
    <url>http://dx.doi.org/doi:10.1371/journal.pone.0005906</url>
    <url>http://www.plosgenetics.org/article/info:doi/10.1371/journal.pgen.1000250</url>
    <url>http://biology.plosjournals.org/perlserv/?request=get-document&amp;doi=10.1371/journal.pbio.0060319</url>
  </test>

</site>

<!-- There are many other patterns for books, all seem different. I hope this is at least valid for most journals. -->
<site name="Wiley">
  <signature>
    <url>!wiley!</url>
  </signature>

  <rule>
    <pattern>
      <match>!(/cgi-bin/fulltext/\d+/PDFSTART)!</match>
      <rewrite>!^.*/cgi-bin/fulltext/(\d+)/PDFSTART$!http://download.interscience.wiley.com/cgi-bin/fulltext?ID=$1&amp;PLACEBO=IE.pdf&amp;e=pdf!</rewrite>
    </pattern>
  </rule>

  <rule>
    <pattern>
      <match>!(/cgi-bin/booktext/\d+/BOOKPDFSTART)!</match>
      <rewrite>!^.*/cgi-bin/booktext/(\d+)/BOOKPDFSTART$!http://download.interscience.wiley.com/cgi-bin/booktext?ID=$1&amp;PLACEBO=IE.pdf&amp;e=pdf!</rewrite>
    </pattern>
  </rule>

  <test>
    <url>http://www3.interscience.wiley.com/journal/121517581/abstract</url>
    <url>http://dx.doi.org/10.1002/9780470020036.fmatter</url>
  </test>
</site>

<site name="Springer">
  <signature>
    <url>!springerlink!</url>
    <body>!(/content/\S*fulltext\.pdf)!</body>
  </signature>

  <rule>
    <pattern>
      <match>!(/content/\S*fulltext\.pdf)!</match>
    </pattern>
  </rule>
  <test>
    <url>http://dx.doi.org/doi:10.2478/s11686-008-0056-1</url>
  </test>
</site>

<site name="NPG">
  <signature>
    <url>!nature\.com!</url>
  </signature>

  <rule>
    <pattern>
      <match>!(/\S*\.pdf)!</match>
    </pattern>
  </rule>


  <!-- Sometime we land on some strange landing page -->
  <rule>
    <pattern>
      <match>!&lt;\s*a\s*href\s*=\s*&quot;\s*(\S*?)\s*&quot;\s*&gt;\s*Full\s*Text\s*&lt;/a&gt;!</match>
    </pattern>
    <pattern>
      <match>!(/\S*\.pdf)!</match>
    </pattern>
  </rule>


  <test>
    <url>http://dx.doi.org/doi:10.1038/456842a</url>
    <url>http://www.nature.com/emboj/journal/v27/n24/abs/emboj2008242a.html</url>
    <url>http://www.nature.com/nmeth/journal/v5/n12/abs/nmeth.1266.html</url>
    <url>http://www.nature.com/doifinder/10.1038/ng1108-1262</url>
  </test>
</site>

<site name="Science">
  <signature>
    <url>!sciencemag\.org!</url>
  </signature>

  <rule>
    <pattern>
      <match>!(/cgi/reprint/\S*\.pdf)!</match>
    </pattern>
  </rule>

  <test>
    <url>http://dx.doi.org/doi:10.1126/science.322.5909.1768</url>
    <url>http://stke.sciencemag.org/cgi/content/abstract/1/50/mr2</url>
  </test>
</site>

<site name="PMC">
  <signature>
    <url>!pubmedcentral\.nih\.gov!</url>
  </signature>

  <rule>
    <pattern>
      <match>!(/picrender\.fcgi\S*blobtype=pdf)!</match>
    </pattern>
  </rule>

  <test>
    <url>http://www.pubmedcentral.nih.gov/articlerender.fcgi?tool=pubmed&amp;pubmedid=18577231</url>
    <url>http://dx.doi.org/doi:10.1186/1742-6405-6-4</url>
  </test>
</site>

<site name="Atypon">
  <signature>
    <url>atypon</url>
    <url>acs\.org/doi/(abs|full)</url>
    <url>annualreviews\.org/doi/(abs|full)</url>
    <url>liebertonline\.com/doi/(abs|full)</url>
    <url>mitpressjournals\.org/doi/(abs|full)</url>
    <body>atypon\.com</body>
  </signature>

  <rule>
    <pattern>
      <rewrite>!(abs|full)!pdf!</rewrite>
    </pattern>
  </rule>

  <test>
    <url>http://dx.doi.org/doi:10.1021/bi702132e</url>
    <url>http://arjournals.annualreviews.org/doi/full/10.1146/annurev.genet.40.110405.090511</url>
    <url>http://www.liebertonline.com/doi/abs/10.1089/cmb.2006.0137</url>
  </test>
</site>


<site name="AllenPress">
  <signature>
    <url>!allenpress\.com!</url>
    <body>!(/pdfserv/\S*)&quot;!</body>
  </signature>

  <rule>
    <pattern>
      <match>!(/pdfserv/\S*)&quot;!</match>
    </pattern>
  </rule>

  <test>
    <url>http://arpa.allenpress.com/arpaonline/?request=get-abstract&amp;issn=1543-2165&amp;volume=132&amp;page=273</url>
  </test>
</site>


<site name="deGruyter">
  <signature>
    <url>!reference-global\.com!</url>
  </signature>

  <rule>
    <pattern>
      <match>!(/doi/pdf/\S*?)&quot;!</match>
    </pattern>
    <pattern>
      <match>!(/production/\S*?\.pdf\S*?)&quot;!</match>
    </pattern>
  </rule>

  <test>
    <url>http://www.reference-global.com/doi/abs/10.1515/BC.2008.016</url>
  </test>
</site>


<site name="JStage">
  <signature>
    <url>!jst\.go\.jp!</url>
  </signature>
  <rule>
    <pattern>
      <match>!(/article/\S*?/_pdf)&quot;!</match>
    </pattern>
  </rule>
  <rule>
    <pattern>
      <match>!(/jnlpdf.php\S*?)&quot;!</match>
    </pattern>
  </rule>

  <test>
    <url>http://www.jstage.jst.go.jp/article/mandi/51/11/51_1099/_article</url>
    <url>http://www.journalarchive.jst.go.jp/english/jnlabstract_en.php?cdjournal=bbb1961&amp;cdvol=55&amp;noissue=12&amp;startpage=3059</url>
  </test>
</site>

<site name="Landes">
  <signature>
    <url>!landesbioscience\.com!</url>
  </signature>
  <rule>
    <pattern>
      <match>!&quot;(\S*?/\S*?\.pdf)&quot;!</match>
    </pattern>
  </rule>

  <test>
    <url>http://www.landesbioscience.com/journals/cc/article/8887/</url>
  </test>
</site>

<site name="Metapress">
  <signature>
    <url>!metapress\.com!</url>
  </signature>
  <rule>
    <pattern>
      <match>!(/content/\S*?/fulltext.pdf)&quot;!</match>
    </pattern>
  </rule>

  <test>
    <url>http://versita.metapress.com/content/np2145348566n664/</url>
  </test>
</site>

<site name="Medknown">
  <signature>
    <url>!article.asp\?issn=\S*?aulast=\S*!</url>
  </signature>
  <rule>
    <pattern>
      <rewrite>!(.*)!$1;type=2!</rewrite>
    </pattern>
    <pattern>
      <match>!(temp/\S*?\.pdf)!</match>
    </pattern>
  </rule>
  <test>
    <url>http://www.indianjcancer.com/article.asp?issn=0019-509X;year=2007;volume=44;issue=1;spage=36;epage=37;aulast=Agrawal</url>
  </test>
</site>

<site name="Scitation">
  <signature>
    <body>!/getpdf/servlet/GetPDFServlet!</body>
  </signature>
  <rule>
    <pattern>
      <match>!(/getpdf/servlet/GetPDFServlet\?filetype=pdf\S*&quot;)!</match>
    </pattern>
  </rule>
  <test>
    <url>http://dx.doi.org/doi:10.1063/1.3109691</url>
  </test>
</site>


<site name="Meta">
  <signature>
    <body namedRegex="meta1"/>
    <body namedRegex="meta2"/>
  </signature>

  <rule>
    <pattern>
      <match namedRegex="meta1"/>
    </pattern>
  </rule>
  
  <rule>
    <pattern>
      <match namedRegex="meta2"/>
    </pattern>
  </rule>

  <test>
    <!-- Old and new Highwire sites -->
    <url>http://genome.cshlp.org/content/17/6/852</url>
    <url>http://dx.doi.org/doi:10.1101/gad.1717309</url>
    <url>http://www.pnas.org/content/105/50/19587.abstract</url>
    <url>http://bloodjournal.hematologylibrary.org/cgi/content/full/111/9/4617</url>
    <url>http://nar.oxfordjournals.org/cgi/content/full/34/suppl_1/D135</url>
    <url>http://bioinformatics.oxfordjournals.org/cgi/reprint/btp064v2</url>
  </test>
</site>


<!-- 

- http://www.worldscinet.com 
- IEEE eg, http://doi.ieeecomputersociety.org/10.1109/TVCG.2006.196


- http://www.informapharmascience.com
- old Highwire without meta tags: http://www.jleukbio.org/cgi/content/full/84/6/1492
- 'fastpdf' preprints maybe Highwire: http://ijo.sagepub.com/cgi/rapidpdf/0306624X08322373v1
- http://meta.wkhealth.com/pt/pt-core/template-journal/lwwgateway/media/landingpage.htm?issn=0891-3668&volume=27&issue=8&spage=760
- http://www.jci.org/articles/view/33189 ??
- http://content.karger.com/produktedb/produkte.asp?typ=fulltext&file=000184701

-->


</driver>
