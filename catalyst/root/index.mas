<html>
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8">


  <link rel="stylesheet" type="text/css" charset="utf-8" href="/ext3/resources/css/ext-all.css"></link>
  <link rel="stylesheet" type="text/css" charset="utf-8" href="/ext.ux/filetree/css/all.css"></link>

  <%perl> 

  use YAML qw(LoadFile);

  my $data = LoadFile($c->path_to('data/resources.yaml'));

  # If debug environment variable is set or minified version of js is not available load all files
  # separately
  if ($ENV{PP_DEBUG} or !-e $c->path_to('root/js/all.js')){
    foreach my $j (@{$data->{css}}){
      print '<link rel="stylesheet" type="text/css" charset="utf-8" href="/'.$j.'"></link>', "\n";
    }

    foreach my $j (@{$data->{js}}, @{$c->stash->{plugins}}){
      print '<script type="text/javascript" charset="utf-8" src="/'.$j.'"></script>', "\n";
    }
  } else {
     print '<link rel="stylesheet" type="text/css" charset="utf-8" href="/css/all.css"></link>', "\n";
     print '<script type="text/javascript" charset="utf-8" src="/js/all.js"></script>', "\n";
  }

  </%perl>

<script type="text/javascript" src="http://cdn.uservoice.com/javascripts/widgets/tab.js"></script>

<title>Paperpile</title>

</head>

<body style="height:100%;border-style:solid;">
  <div id="splash" style="position:absolute;width:100%;height:100%;">
    <div class="pp-status pp-status-line-container pp-status-info" style="position:fixed; top:50%;left:50%;margin-left:-50px;">
      <table>
        <tr> 
          <td class="pp-basic pp-status-msg">Loading&nbsp;Paperpile.</td>
          <td class="pp-basic pp-status-busy"></td>
        </tr>
      </table>
    </div>
  </div>

</body>
</html>
